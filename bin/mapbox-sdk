#!/usr/bin/env node

var MapboxClient = require('../');
var argv = require('yargs')
  .help('help')
  .command('geocode-forward', 'Resolve a search string to locations')
  .demand(1)
  .argv;

if (!process.env.MapboxAccessToken) {
  throw new Error('MapboxAccessToken environment variable must be set');
}

var mapboxClient = new MapboxClient(process.env.MapboxAccessToken);

if (argv._[0] === 'geocode-forward') {
  var query = argv._[1];
  mapboxClient.geocodeForward(query, function (err, res) {
    if (err) throw err;
    process.stdout.write(JSON.stringify(res, null, 2));
  });
}
