<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

- [MapiRequest](#mapirequest)
  - [Properties](#properties)
  - [url](#url)
  - [send](#send)
  - [abort](#abort)
  - [eachPage](#eachpage)
  - [clone](#clone)
- [MapiResponse](#mapiresponse)
  - [Properties](#properties-1)
  - [hasNextPage](#hasnextpage)
  - [nextPage](#nextpage)
- [MapiError](#mapierror)
  - [Properties](#properties-2)
- [MapiClient](#mapiclient)
  - [Properties](#properties-3)

## MapiRequest

A Mapbox API request.

Note that creating a `MapiRequest` does *not* send the request automatically.
Use the request's `send` method to send it off and get a `Promise`.

The `emitter` property is an `EventEmitter` that emits the following events:

- `'response'` - Listeners will be called with a `MapiResponse`.
- `'error'` - Listeners will be called with a `MapiError`.
- `'downloadProgress'` - Listeners will be called with `ProgressEvents`.
- `'uploadProgress'` - Listeners will be called with `ProgressEvents`.
  Upload events are only available when the request includes a file.

### Properties

- `emitter` **EventEmitter** An event emitter. See above.
- `client` **[MapiClient][18]** This request's `MapiClient`.
- `response` **([MapiResponse][19] | null)** If this request has been sent and received
    a response, the response is available on this property.
- `error` **([MapiError][20] \| [Error][21] | null)** If this request has been sent and
    received an error in response, the error is available on this property.
- `aborted` **[boolean][22]** If the request has been aborted
    (via [`abort`][6]), this property will be `true`.
- `sent` **[boolean][22]** If the request has been sent, this property will
    be `true`. You cannot send the same request twice, so if you need to create
    a new request that is the equivalent of an existing one, use
    [`clone`][9].
- `path` **[string][23]** The request's path, including colon-prefixed route
    parameters.
- `origin` **[string][23]** The request's origin.
- `method` **[string][23]** The request's HTTP method.
- `query` **[Object][24]** A query object, which will be transformed into
    a URL query string.
- `params` **[Object][24]** A route parameters object, whose values will
    be interpolated the path.
- `headers` **[Object][24]** The request's headers.
- `body` **([Object][24] \| [string][23] | null)** Data to send with the request.
    If the request has a body, it will also be sent with the header
    `'Content-Type: application/json'`.
- `file` **([Blob][25] \| [ArrayBuffer][26] \| [string][23] | ReadStream)** A file to
    send with the request. The browser client accepts Blobs and ArrayBuffers;
    the Node client accepts strings (filepaths) and ReadStreams.
- `encoding` **[string][23]** The encoding of the response.
- `sendFileAs` **[string][23]** The method to send the `file`. Options are
    `data` (x-www-form-urlencoded) or `form` (multipart/form-data).
- `_nextPageRequest` **any** 

### url

Get the URL of the request.

#### Parameters

- `accessToken` **[string][23]?** By default, the access token of the request's
    client is used.

Returns **[string][23]** 

### send

Send the request. Returns a Promise that resolves with a `MapiResponse`.
You probably want to use `response.body`.

`send` only retrieves the first page of paginated results. You can get
the next page by using the `MapiResponse`'s [`nextPage`][13]
function, or iterate through all pages using [`eachPage`][7]
instead of `send`.

Returns **[Promise][27]&lt;[MapiResponse][19]>** 

### abort

Abort the request.

Any pending `Promise` returned by [`send`][5] will be rejected with
an error with `type: 'RequestAbortedError'`. If you've created a request
that might be aborted, you need to catch and handle such errors.

This method will also abort any requests created while fetching subsequent
pages via [`eachPage`][7].

If the request has not been sent or has already been aborted, nothing
will happen.

### eachPage

Invoke a callback for each page of a paginated API response.

The callback should have the following signature:

```js
(
  error: MapiError,
  response: MapiResponse,
  next: () => void
) => void
```

**The next page will not be fetched until you've invoked the
`next` callback**, indicating that you're ready for it.

#### Parameters

- `callback` **[Function][28]** 

### clone

Clone this request.

Each request can only be sent *once*. So if you'd like to send the
same request again, clone it and send away.

Returns **[MapiRequest][29]** A new `MapiRequest` configured just like this one.

## MapiResponse

A Mapbox API response.

### Properties

- `body` **[Object][24]** The response body, parsed as JSON.
- `rawBody` **[string][23]** The raw response body.
- `statusCode` **[number][30]** The response's status code.
- `headers` **[Object][24]** The parsed response headers.
- `links` **[Object][24]** The parsed response links.
- `request` **[MapiRequest][29]** The response's originating `MapiRequest`.

### hasNextPage

Check if there is a next page that you can fetch.

Returns **[boolean][22]** 

### nextPage

Create a request for the next page, if there is one.
If there is no next page, returns `null`.

Returns **([MapiRequest][29] | null)** 

## MapiError

A Mapbox API error.

If there's an error during the API transaction,
the Promise returned by `MapiRequest`'s [`send`][5]
method should reject with a `MapiError`.

### Properties

- `request` **[MapiRequest][29]** The errored request.
- `type` **[string][23]** The type of error. Usually this is `'HttpError'`.
    If the request was aborted, so the error was
    not sent from the server, the type will be
    `'RequestAbortedError'`.
- `statusCode` **[number][30]?** The numeric status code of
    the HTTP response.
- `body` **([Object][24] \| [string][23])?** If the server sent a response body,
    this property exposes that response, parsed as JSON if possible.
- `message` **[string][23]?** Whatever message could be derived from the
    call site and HTTP response.

## MapiClient

A low-level Mapbox API client. Use it to create service clients
that share the same configuration.

Services and `MapiRequest`s use the underlying `MapiClient` to
determine how to create, send, and abort requests in a way
that is appropriate to the configuration and environment
(Node or the browser).

### Properties

- `accessToken` **[string][23]** The Mapbox access token assigned
    to this client.
- `origin` **[string][23]?** The origin
    to use for API requests. Defaults to [https://api.mapbox.com][31].

[1]: #mapirequest

[2]: #properties

[3]: #url

[4]: #parameters

[5]: #send

[6]: #abort

[7]: #eachpage

[8]: #parameters-1

[9]: #clone

[10]: #mapiresponse

[11]: #properties-1

[12]: #hasnextpage

[13]: #nextpage

[14]: #mapierror

[15]: #properties-2

[16]: #mapiclient

[17]: #properties-3

[18]: #mapiclient

[19]: #mapiresponse

[20]: #mapierror

[21]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Error

[22]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean

[23]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[24]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[25]: https://developer.mozilla.org/docs/Web/API/Blob

[26]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer

[27]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise

[28]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function

[29]: #mapirequest

[30]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number

[31]: https://api.mapbox.com
