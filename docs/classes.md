<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

- [MapiClient](#mapiclient)
  - [Properties](#properties)
- [MapiResponse](#mapiresponse)
  - [Properties](#properties-1)
  - [hasNextPage](#hasnextpage)
  - [nextPage](#nextpage)
- [MapiError](#mapierror)
  - [Properties](#properties-2)
- [MapiRequest](#mapirequest)
  - [Properties](#properties-3)
  - [url](#url)
  - [send](#send)
  - [abort](#abort)
  - [eachPage](#eachpage)
  - [clone](#clone)

## MapiClient

A low-level Mapbox API client. Use it to create service clients
that share the same configuration.

Services and `MapiRequest`s use the underlying `MapiClient` to
determine how to create, send, and abort requests in a way
that is appropriate to the configuration and environment
(Node or the browser).

### Properties

- `accessToken` **[string][18]** The Mapbox access token assigned
    to this client.

## MapiResponse

A Mapbox API response.

### Properties

- `body` **[Object][19]** The response body, parsed as JSON.
- `rawBody` **[string][18]** The raw response body.
- `statusCode` **[number][20]** The response's status code.
- `headers` **[Object][19]** The parsed response headers.
- `links` **[Object][19]** The parsed response links.
- `request` **[MapiRequest][21]** The response's originating `MapiRequest`.

### hasNextPage

Check if there is a next page that you can fetch.

Returns **[boolean][22]** 

### nextPage

Create a request for the next page, if there is one.
If there is no next page, returns `null`.

Returns **([MapiRequest][21] | null)** 

## MapiError

A Mapbox API error.

If there's an error during the API transaction,
the Promise returned by `MapiRequest`'s `send`
method should reject with a `MapiError`.

### Properties

- `request` **[MapiRequest][21]** The errored request.
- `type` **[string][18]** The type of error. Usually this is "HttpError".
    If the request was aborted, so the error was
    not sent from the server, the type will be
    "RequestAbortedError".
- `statusCode` **[number][20]?** The numeric status code of
    the HTTP response.
- `body` **([Object][19] \| [string][18])?** If the server sent a response body,
    this property exposes that response, parsed as JSON if possible.
- `message` **[string][18]?** Whatever message could be derived from the
    call site and HTTP response.

## MapiRequest

A Mapbox API request.

Note that creating a `MapiRequest` does *not* send the request automatically.
Use the request's `send` method to send it off and get a `Promise`.

The `emitter` property is an `EventEmitter` that emits the following events:

- `'response'` - Listeners will be called with a `MapiResponse`.
- `'error'` - Listeners will be called with a `MapiError`.
- `'downloadProgress'` - Listeners will be called with `ProgressEvents`.
- `'uploadProgress'` - Listeners will be called with `ProgressEvents`.

### Properties

- `emitter` **EventEmitter** An event emitter. See above.
- `client` **[MapiClient][23]** This request's `MapiClient`.
- `response` **([MapiResponse][24] | null)** If this request has been sent and received
    a response, the response is available on this property.
- `error` **([MapiError][25] \| [Error][26] | null)** If this request has been sent and
    received an error in response, the error is available on this property.
- `aborted` **[boolean][22]** If the request has been aborted
    (via [`abort`][14]), this property will be `true`.
- `sent` **[boolean][22]** If the request has been sent, this property will
    be `true`. You cannot send the same request twice, so if you need to create
    a new request that is the equivalent of an existing one, use
    [`clone`][17].
- `path` **[string][18]** The request's path, including colon-prefixed route
    paratemers.
- `origin` **[string][18]** The request's origin.
- `method` **[string][18]** The request's HTTP method.
- `query` **[Object][19]** A query object, which will be transformed into
    a URL query string.
- `params` **[Object][19]** A route parameters object, whose values will
    be interpolated the path.
- `headers` **[Object][19]** The request's headers,
- `body` **([Object][19] | null)** A JSON body to send with the request.
    If the request has a body, it will also be sent with the header
    'Content-Type: application/json'.
- `file` **([Blob][27] \| [ArrayBuffer][28] \| [string][18] | ReadStream)** A file to
    send with the request. The browser client accepts Blobs and ArrayBuffers;
    the Node client accepts strings (filepaths) and ReadStreams.

### url

Get the URL of the request.

#### Parameters

- `accessToken` **[string][18]?** By default, the access token of the request's
    client is used.

Returns **[string][18]** 

### send

Send the request. Returns a Promise that resolves with a `MapiResponse`.
You probably want to use `response.body`.

`send` only retrieves the first page of paginated results. You can get
the next page by using the `MapiResponse`'s [`nextPage`][6]
function.

The browser and Node SDKs each implement a `send` method suitable to
their context.

Returns **[Promise][29]&lt;[MapiResponse][24]>** 

### abort

Abort the request.

Any pending `Promise` returned by [`send`][13] will be rejected with
an error with `type: 'RequestAbortedError'`. If you've created a request
that might be aborted, you need to catch and handle such errors.

This method will also abort any requests created while fetching subsequent
pages via [`eachPage`][15].

If the request has not been sent or has already been aborted, nothing
will happen.

### eachPage

Invoke a callback for each page of a paginated API response.

The callback should have the following signautre:

```js
(
  error: MapiError,
  response: MapiResponse,
  next: () => void
) => void
```

**The next page will not be fetched until you've invoked the
`next` callback**, indicating that you're ready for it.

#### Parameters

- `callback` **[Function][30]** 

### clone

Clone this request.

Each request can only be sent *once*. So if you'd like to send the
same request again, clone it and send away.

Returns **[MapiRequest][21]** A new `MapiRequest` configured just like this one.

[1]: #mapiclient

[2]: #properties

[3]: #mapiresponse

[4]: #properties-1

[5]: #hasnextpage

[6]: #nextpage

[7]: #mapierror

[8]: #properties-2

[9]: #mapirequest

[10]: #properties-3

[11]: #url

[12]: #parameters

[13]: #send

[14]: #abort

[15]: #eachpage

[16]: #parameters-1

[17]: #clone

[18]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[19]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[20]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number

[21]: #mapirequest

[22]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean

[23]: #mapiclient

[24]: #mapiresponse

[25]: #mapierror

[26]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Error

[27]: https://developer.mozilla.org/docs/Web/API/Blob

[28]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer

[29]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise

[30]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function
